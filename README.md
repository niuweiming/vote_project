# vote_project
投票项目

项目亮点

基于redis的xyz限流

针对某一个接口但是不限制用户



一个用户X秒内请求超过Y次封Z秒，用户已登录，能用uid

但是用户未登录，ip+ua

```
ip 计网 
UA user-agent用户代理，有一些硬件数据
IP + UA 
可能误判

```

给每个游客一个uuid

解决办法使用uuid



常用的漏斗算法限流

令牌桶算法

滑动窗口算法的限流

基于服务器资源使用率的限流



想过去实现gorm的预加载模式

要求太严格，要重新进行结构体的定义等等放弃

优化session 8/888

因为session存在本地，消耗本机的内存

假如多台服务器，A跟B不一样

为啥用原生的sql

最关键的原因是后期出现慢sql的问题好去排查



加上一个跨域的



刚开始使用cookie 

cookie保存在浏览器一端,后续所有请求自动带上cookie

带会被篡改又安全问题

cookie,存储在客户端,帮助在客户端和服务器之间维持状态信息

安全风险有被篡改的风险,容量限制:4Kb 浏览器可以禁用cookie



session  存储在服务器,容量大可以保存对象

占用服务器资源,扩展性差,依然需要依赖cookie,跨域限制



考虑使用jwt 

jwt不用存储在任何一个地方,是一个带有一定数据的密钥,在生成之后,在后续前后端的交互过程中一直去带着

这样既保证安全性,又不会造成资源浪费

jwt由三部分组成: 

头部header+ 负载payload + 签名 signaturw

需要传递的信息在负载中简单而又安全





